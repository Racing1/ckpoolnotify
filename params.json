{"name":"ckpoolnotify","tagline":"Tools that monitor the CK solo pool and provide user notification","body":"# CK Solo Pool Notification Script — Read Me\r\n\r\n## By edonkey:\tSeptember 15, 2015\r\n## Donations:  \t18wQtEDmhur2xAd3oE8qgrZbpCDeuMsdQW\r\n\r\n\r\n## Introduction\r\n\r\nThe ckPoolNotify.py script monitors the CK solo pool, emailing the caller with status changes. \r\n\r\nCurrently this script monitors two events. First, if a block is found then a notification email is sent. If the found block is from any of your monitored addresses, the script congratulates you. Otherwise it wishes you better luck next time.\r\n\r\nSecond you will receive a notification if the best shares submitted by your specified workers or users has improved from previous values. While past success is no indication of future success, this does provide a little bit of feedback that something is happening. And it's kind of fun to cheer on your miners.\r\n\r\n\r\n## Installation\r\n\r\nThis script requires Python 2.6 or greater. Depending on your platform, you may also need to install certain Python libraries, including “keyring” for secure password storage.\r\n\r\nIn order to install the required Python libraries, you can use any Python package installation tools that you wish. I prefer setuptools, which is what we’ll use for the installation examples below.\r\n\r\nAssuming that you have setuptools already installed, here’s how to install the required libraries (the ‘sudo’ is needed for Mac OS X; it may or may not be needed for your platform):\r\n\r\n\tsudo easy_install -U requests\r\n\tsudo easy_install -U keyring\r\n\r\nTo verify your installation, try getting the script’s help docs. If this works with no error, then the script is ready to use:\r\n\r\n\tckPoolNotify.py --help\r\n\r\n\r\nIf you don’t have setuptools installed, please see below for installation on your platform.\r\n\r\n\r\n### Linux\r\n\r\nHere’s a sample command line that will install the setuptools under Ubuntu:\r\n\r\n\tsudo apt-get install python-setuptools\r\n\r\nIf you're using a different Linux distribution with a different package manager, you'll have to translate the above into the command lines for that package manager.\r\n\r\n\r\n### Macintosh\r\n\r\nIf you're on a Macintosh, there is no native package manager. If you don't already have the setuptools installed, you must download and install it. Here's how:\r\n\r\n\tcurl https://bootstrap.pypa.io/ez_setup.py -o ez_setup.py\r\n\tsudo python ez_setup.py\r\n\r\n\r\n### Windows\r\n\r\nIf you're on Windows and have not installed the setuptools package, please follow the installation instructions here for your version of Windows:\r\n\r\n\thttps://pypi.python.org/pypi/setuptools\r\n\r\n\r\n## Email Configuration\r\n\r\nOnce installed, the script is ready to use. However since the script sends emails, it’s a good idea to send a test email first to make sure you’ve got the correct email configuration and credentials.\r\n\r\n\r\n### Authenticated Email\r\n\r\nMost people will be sending emails using an authenticated email server. This means that a user and password must be provided to the email server in order to send. If you provide a password to this script, it will store it securely in the local keychain for your operating system.\r\n\r\nOne note about Gmail users. It’s a good idea to use Gmail’s two factor authentication. Assuming that you have configured two factor security, then you will need to go to your Gmail account and create an application password for this script. Once you have that application password, you can pass it to the script instead of your actual Gmail account password. See Google’s documentation for setting up application passwords.\r\n\r\nFor security reasons you probably don’t want to provide your password on the command line to this script, which would leave your password in the command line history. You can avoid this by using the  --setpassword option.\r\n\r\nHere’s an example of how to set your password and send a test email without exposing your password on the command line (provide your own path to the script and your own email user and server):\r\n\r\n\t./ckPoolNotify.py --server \"smtp.gmail.com:587\" --user my_email@gmail.com --setpassword --test\r\n\r\nYou will be prompted for your password at this point, but it will not be visible in the terminal window.\r\n\r\nNote that if you have a Gmail address, you don’t have to specify the server because the script defaults to the Gmail server URL.\r\n\r\nOnce you’ve successfully sent a test email to your account, your password will be set in your local keychain. You will not need to specify your password to the script again, unless you change your password.\r\n\r\n\r\n### Unauthenticated Email\r\n\r\nIf you are using an unauthenticated email server, then no user name or password is needed. Generally this will be a rare case, unless you’re running your own email server.\r\n\r\nIf you have an unauthenticated email server, then you can send a test email with a command line like the following:\r\n\r\n\t./ckPoolNotify.py --server <your server> --sender <your sender email> --recipients <your recipient email> --test\r\n\r\n\r\n## Notification Configuration\r\n\r\nOnce you’ve successfully received the test email message, it’s time to use the script itself. To do that, you call the script with the same email credentials (without the password because that will be retrieved by the script from your keychain), plus the worker or user addresses that you wish to monitor.\r\n\r\nHere’s an example (note that it should be all on one line):\r\n\r\n\t./ckPoolNotify.py --verbose --server \"smtp.gmail.com:587\" --user my_email@gmail.com --workers \"1JiWuyX94wrCr7JhkAn7x5qNMCEef1KhqX.edonkeystick\" --users \"1JiWuyX94wrCr7JhkAn7x5qNMCEef1KhqX\"\r\n\r\nNote that you can specify multiple workers or users by using a comma separator. For example: --workers \"worker1,worker2,worker3\"\r\n\r\nIf this is the first time you’ve called the script, it will send you an email with the current best shares, then it will “remember” the best shares in a local file. You won’t receive another notification email until there’s a new best share, or if you clear the local storage with the “--clear” command.\r\n\r\nThe script will run in a loop forever until you quit it.\r\n\r\n\r\n## Daemon Configuration\r\n\r\nIn some cases you may want to run the notification script automatically at boot as a daemon rather than manually launching it from a command line window. Depending on the platform you’re using, there will be a number of ways to configure a script to be a daemon. \r\n\r\n\r\n### Macintosh Daemon\r\n\r\nFor now, this section discusses how to set up a daemon for Mac OS X. Please follow these steps if you wish to configure the script to run as a daemon:\r\n\r\n1. The script should be run as a regular user, not as root. To do that use a text editor to open the org.edonkey.mining.ckpoolnotify.plist file, changing REPLACE_ME to your user. If you don’t know what your user name is, run the following command in at terminal window: \r\n\r\n\t\techo $USER\r\n\r\n2. Edit the ckPoolNotify.sh script (note that this is a shell script, not the main, general purpose Python script), setting your email credentials, plus the workers and users you want to monitor.\r\n\r\n3. Delete the scripts stats file (which will force an email send the next time the script is run) by entering the following command in a Terminal window:\r\n\r\n\t\trm ~/.ckPoolNotify_SavedStats\r\n\r\n4. Test the shell script by dragging the edited ckPoolNotify.sh script to a Terminal window and hitting the return key. The script should run without errors. If it does, wait for it to send the email, then quit the script by hitting command c. At this point, you should have received the notification email.\r\n\r\n5. Copy the “ckPoolNotify” folder to /Library/Application Support. To do this, use this command line (substituting your ckPoolNotify folder path if it’s not in your home directory; you will be asked for your admin credentials to perform the copy):\r\n\r\n\t\tsudo cp -rp ~/ckPoolNotify /Library/Application\\ Support\r\n\r\n6. From a Terminal window, enter the following commands:\r\n\r\n\t\trm ~/.ckPoolNotify_SavedStats\r\n\r\n\t\tsudo cp /Library/Application\\ Support/ckPoolNotify/org.edonkey.mining.ckpoolnotify.plist /Library/LaunchDaemons\r\n\r\n\t\tsudo launchctl load /Library/LaunchDaemons/org.edonkey.mining.ckpoolnotify.plist\r\n\r\nIf everything worked, then the script will be running as a Daemon under your user, and an email will be sent again because we deleted the saved stats file. From this point on, the daemon will automatically run at boot on your machine.\r\n\r\nIf you have problems with the daemon, the following commands will show you the text output from the script (the first one is normal output and the second one is for errors):\r\n\r\n\tcat /tmp/ckpoolnotify.stdout \r\n\tcat /tmp/ckpoolnotify.stderr\r\n\r\nIf you want to remove the daemon, then enter these commands in a Terminal window:\r\n\r\n\tsudo launchctl unload /Library/LaunchDaemons/org.edonkey.mining.ckpoolnotify.plist\r\n\tsudo rm /Library/LaunchDaemons/org.edonkey.mining.ckpoolnotify.plist\r\n\r\nAt this point the daemon will be unloaded and will not be loaded on subsequent boots.\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}